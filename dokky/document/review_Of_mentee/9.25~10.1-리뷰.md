## 1. 현재 프로젝트에서 가장 부족하다고 생각되는 부분과 이유

현재 가장 우선순위로 두어야 할 부분이 개인정보 보안으로 생각된다.

회원가입을 받으려면 개인정보를 받을 수 밖에 없는데, 

개인정보가 유출될시 법적인 문제가 대단히 중요한것으로 알고있다. 

현재까지 개발된것들로보아 보안을 제외하고는 

사용자들이 커뮤니티안에서 활동하는데 큰 지장은 없는정도라 생각된다.

이에 SSL을 알아보았고 SSL을 적용하기 위해서는 

인프라(EC2,도메인)를 구축이 선행되어야 함을 다시 확인했다.

1. 리뷰후: - 개인정보를 내 사이트에서 안가지고 가는방법이 있다.
		 - 구글, 페이스북, 인스타그램 계정 연동해서 회원가입 혹은 바로 로그인
		 - 개인정보는 저장하는 데이터가 아니라 사용하는 데이터의 관점으로 바라보자
     	 - 하지만 SSL은 적용해야 계정연동이 가능하다
     	 - 그리고 인증서 같은 경우는 가짜 인증서로도 가능은하다.
     	 - localhost 도메인도 등록가능하다.
		 - 세상에 클라우드 서비스는 많으니 amazon 말고 microsoft, ibm, google에 대해서도 추후 관심을 가져보자

## 2. 일주일간 진행 하였던 내용들

* ec2(우분투에서 아파치, 자바,톰캣 설치) ,rds(오라클) 생성 및 프로젝트 빌드,배포

* 블로그에 SSL관련 지식들 정리중 https://cg-developer.tistory.com/category/Basic/네트워크

* 프로젝트 전체적으로 CSS 적용 및 기타 프로젝트 오류들 보완


## 3. 진행중 겪었던 모든것들

### 1) RDS 삭제후 재생성시 프리티어 적용이 안되는 문제
 
RDS를 처음 생성후 버전문제로 인해 삭제하고나서 다시 생성을 하니 프리티어 옵션이 적용이 안된다..

오라클이 아닌 다른 제품에서는 프리티어가 적용되는데 왜오라클에서는 안되는건지 모르겠다..

이게 한번 생성하면 두번째부터는 프리티어 적용이 안되게끔 정책이 되어있는건지..

1년 무료라고했는데 도무지 프리티어 적용이 안되서 당황스러운..

아니면 몇일이 지나야 프리티어를 쓸 수 있는건지 .. 계속 찾아보는중.. 

https://aws.amazon.com/ko/premiumsupport/knowledge-center/?icmpid=support_rt_kc_articles#rds

3-1) 리뷰후: rds를 삭제하고서도 복구가 되는지 확인해보자 그러면 실마리가 보일것같다. 아마도 aws정책상 백업기간을 설정안하고 삭제하더라도
데이터를 당분간은 복구할수있도록 하는거같다. 그래서 아직 깔끔하게 데이터베이스가 삭제안됬을수도있다.


### 2) AWS 계정 MFA활성화 방법

 처음만들었던 계정에서는 구글 opt를 활용해서

 mfa 활성화가 되었었는데.. 두번째 만든계정에서 할려고 보니 활성화가 도무지 안된다..

 "권한이 필요함

 이 작업을 수행하는 데 필요한 권한이 없습니다. 관리자에게 권한을 추가해 달라고 요청하십시오. 자세히 알아보기

 Authentication code for device is not valid. " 

 소문으로는 디바이스 하나에 활성화는 하나밖에 안된다는 말이있는데..사실인지 모르겠고..

 여러모로 aws계정 보안은 확실해야된다고 생각된다.. 과금 문제가 언제 어떻게 터질지도 모르고

 그래서 더욱 조심스럽고 함부로 클릭하기도 겁이난다

 의심가는건 첫번째 계정에서 이미 만들었기 때문에 , 권한을 첫번째 계정에서

 두번째 계정에다가 허용을 해줘야 하는건지..

 이것 또한 계속 찾아보는중이고..
 
 3-2)리뷰후: - MFA 문제: google otp 문제에 대해 조사(디바이스 레벨로 설정해서 문제가 있음)
  - Authy 2-Factor Authentication로 대체해서 해보자. otp같은경우 하나의 디바이스에 하나만 되는거 같다.


### 3) 왜 80포트로 접속이 안될까?

ec2의 아파치 웹서버의 포트는 80이고 톰캣의 포트는 8080이다.

아파치와 톰캣의 연동전에는 아파치로 80포트로 접속이 됬는데,

왜 연동후부터는 80포트로 접속이 안될까?

보안 그룹의 HTTP 80포트도 위치무관하게 열어두었다.

아파치도 잘 작동중이다..

연동했을 경우 기본적으로 80포트로 요청을 받아들인다고 알고있다..

클라이언트가 요청한 정보가 정적인 페이지일경우 아파치가 직접 처리후 응답을 보내게 되고 동적인 페이지인경우 톰캣에게 요청을 넘겨서 처

리후 정적인 페이지를 아파치에게 전달하는것으로 알고있는데

그런데도 접속이 안되는건 연동을 하게되면 아파치로의 접속이 현재 막혀있고

톰캣 8080으로만 열리게 되어있다는건데..

3-3)리뷰후:  로컬 환경에서 아파치와 톰캣을 연동한 후에 잘 동작하는지 테스트 진행,잘된다면 그것을 그대로 AWS에 적용해보자

### 4) 아파치웹서버와 톰캣의 제대로된 역할은?

웹서버(아파치)는 정적컨텐츠

was(톰캣)는 동적컨텐츠(JSP 서블릿 파일 처리)를 담당한다고는 알고있는데, 

새로 발견한 사실은 톰캣이 정적컨텐츠를 보여주는 역할도 한다는것이다. 

실제로 아파치는 중지시키고 톰캣만 실행시키고 프로젝트에 접속해보면 정적,동적 모두 잘 돌아간다.

그러면 웹서버 아파치가 도대체 무슨필요인가? 톰캣만으로도 다 돌리수 있는데

톰캣에는 Web Server(Coyote)가 이미 들어가 있다.

찾아보니 아파치는 정적컨텐츠에 특화 된것이고 톰캣은 동적 컨텐츠에 특화된것으로 이해했다.

그래서 정적컨텐츠를 사용자에게 보여줄때는 아파치가 집중해서 일을 하는것이고,

톰캣은 정적컨텐츠를 보여줄수도 있지만 동적컨텐츠에 집중하는것으로 이해했다.

결론적으로 아파치와 톰캣이 역할을 나눠서 잘하는것에 집중하는것으로 이해했는데..

그렇게 잘하는것에 집중해야 성능적인면에서, 속도에서 효율적일수 있다는 것일까?

아니면 당장 적은 수의 Request를 감당하는거야 WAS의 성능도 좋으니 큰 차이를 발생시키진 않지만

동적 서버인 WAS가 많은 request 를 감당할때 분산처리하는 편이 성능적으로도 좋기때문에 웹서버를 따로 두는 것일까?

그러니까 톰캣의 웹서버는 기능도적고 많은 사용자가 요구할때 부하가 많이걸려서?

아니면..

WAS는 일반사람들이 다이렉트로 접근을 못하고 

웹서버만 통해서 접근을 가능하게 할려고 그러는걸까?

웹서버는 노출을 시켜서 아무나 접속이 가능하게하고,

WAS는 아무나 접근 못하게 IP를 다 차단시켜놓고,

웹서버 IP에서만 WAS로 통신이 되게끔 해놓고,

중요한 DB관련 접속은 WEB이 아니라 WAS에서만 해놓아 중요한 정보를 보호하려고..?

3-4) 리뷰후 : 웹서버와 웹어플리케이션 서버의 구분: 로직 처리를 하고 결과를 주느냐 아니냐의 큰 차이
웹서버는 로직처리(조건문,if문등등)가 없지만 was는 로직처리가있다 그래서 성능이 더떨어진다. 
was가 일반사람들이 다이렉트로 접근을 못하게 하기위해서라는 말은 확실치않다 node.js같은경우 was와 웹서버의 구분이 없다.

https://cg-developer.tistory.com/348 블로그 정리

### 5) 장시간 고생했던 빌드 실패의 문제

https://github.com/ytw9699/Dokky/issues/7

3-5) 리뷰후: 메이븐의 기능이 완전하지않다.  maven => gradle로 바뀌어 가고 있는 흐름을 알아봐도 좋을것같다.

### 6) 자바와 오라클 설치시 고민됬던점

Oracle JDK 와 OpenJDK 

추후 유료/무료 관련 문제가있을수 있어서 아무래도 OpenJDK 를 선택해서 설치함

성능상에서는 크게차이는 없는것으로 확인..

오라클은 상업적인용도로는 유료라는데 일단은 오라클로 설치..추후 다른것으로 변환이 필요할듯하다.

3-6) 리뷰후:  OpenJDK쓰자 다른 OpenJDK를 거의 안쓰는곳이없을정도다.



