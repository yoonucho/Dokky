## 1. 우분투에서 톰캣9.0로그를 완전히 찍지 못하는 현상

1) 문제점: 

 	 	컨트롤러, 서비스 클래스등 에서 log4j등을 통해 로그를 찍어둔것을 실시간으로 우분투환경에서 확인 못하는 현상
 	 	/var/lib/tomcat9/logs 폴더에가서
 	 	localhost.2020-03-14.log
 	 	catalina.2020-03-14.log
 	 	localhost_access_log.2020-03-14.txt
 	 	위 파일들을
 		tail -f , tail -n500 등의 명령어로 열어보아도
 		로그를 보는데 한계가 있음
 		그냥 기본적인 톰캣이 돌거나, 톰캣에 접근한 리퀘스트 주소값은 볼수 있음
 	
2) 원인: 
		 제대로된 원인을 찾지못함
 		 톰캣8에서는 catalina.out으로 확인이 가능함, 하지만 9에서는 확인하는 방법이 바뀐듯하다..

3) 임시 해결방법 :

 		명령어 : journalctl -u tomcat9.service 입력후 G라고 다시 입력
 		입력후 시간이 걸리지만 로그는 보여짐 
 		위 명령어를 통해 톰캣의 생성부터 모든 로그를 한번에 확인 가능
 		단점은 실시간 로그를 보지못하고, 대량의 로그를 보기 때문에 시간이 걸리고
 		불편하다는점이 있음 어찌됬던 임시적으로라도 본것에 만족하겠지만
 		실시간 로그찍는방법을 찾아야함

## 2. dokky서버 전체에서 9시간전으로 나타나는 현상

1) 문제점 : 윈도우(데스크탑)과 우분투(도키서버)환경 에서 9시간의 차이가 발생
		글쓰기 시간, 댓글 시간,알람시간,쪽지시간 등 모든 시간에서 차이발생
		같은 RDS디비로부터 값을 가져와 도키를 서비스 할때 발생하는 시간차이
	
2) 원인 : 1.우분투 운영체제와 AWS RDS 설정 에서 한국시간으로 맞춰져 있지 않기 때문
		2. 같은 RDS 디비로부터 값을 가져온다 하지만 운영체제가 달라지면 환경이 달라지기 때문이다.
		세계표준시(UTC)와 한국 표준시(KST)의 차이점 : 한국은 KST=UTC+09:00 를 따름

3) 궁금점 : 왜 예전에는 아무문제가 없었는데 어느 순간부터 이렇게 된걸까..바뀌게 된 정확한 원인이 뭔가
 		RDS 인스턴스 클래스가 DB db.t2.micro 였는데, db.t3.micro로 자동 업데이트 되었고
 		그래서 시간차이가 안나던것이 나게된것이 아닐까 싶다.

4) 해결방법 : - 댓글을 제외한 나머지 시간차이 해결방법: Oracle AWS RDS Timezone 설정으로 해결
 		   - 댓글의 시간차이 해결방법: 우분투 운영체제에서 명령어 1가지로 해결
 		   - sudo dpkg-reconfigure tzdata
  		   - ln -sf /usr/share/zoneinfo/Asia/Seoul /etc/localtime(이것은 필요 없음)
 		   - 위 설정을 한번 설정하면 되돌리기 복잡한것 같다..
 		   
![image](https://user-images.githubusercontent.com/35983608/77069443-c76a6c80-6a2b-11ea-9ea1-de9d86422b69.png)
![image](https://user-images.githubusercontent.com/35983608/77069614-16b09d00-6a2c-11ea-94ac-3c18ddab2711.png)
 		  
 		   - 순서1 : sudo dpkg-reconfigure tzdata
 		   - 순서2 : Oracle AWS RDS Timezone 설정

5) 해결을 위해 시도했던것
 	
 	전제조건 : db는 같은 aws rds의 같은 db인것이고 운영체제만 달리한다.
 	
 	- 내가 가져오려는 date의 값이 운영체제가 달라질때 어떻게 변화되는가를 계속 로그로 확인
 	- 여러 timezone과 관련된 값들을 계속 로그로 확인해서 차이점을 발견

## 3. dokky서버에서 today수를 가져오지 못하는 현상

1) 문제점: 

 	똑같은 db에서 값을 가져왔음에도 불구하고
 	윈도우(데스크탑)에서는 today수가 표시되는데, 우분투(도키서버)에서는 today수가 0으로 나오는 현상
 	쿼리 : select count(*) from dk_visitor where substr(to_char(visit_time), 1, 9) = to_char(sysdate, 'yy/MM/dd')
 	우분투 도키 결과값 : 0 으로나옴
 	윈도우 데스크탑 결과값 : 투데이수가 제대로 나옴  

2) 원인 : 
	
 	결국 환경의 차이 locale의 차이때문인것같다. timezone설정의 문제는 아니지만 어찌됬던 환경의 차이라는것
  	date 타입을 char로 돌리고 substr로 짜를때 함수안에서 무언가
	변환이되어 날짜를 나타내는 형식이 바뀌어버림
 	우분투 : 18-MAR-20
 	윈도우 : 20/03/18 

3) 해결방법 : 
 	
 	쿼리의 변경 > select count(*) from dk_visitor where substr(to_char(visit_time,'yy/MM/dd'), 1, 9) = to_char(sysdate, 'yy/MM/dd')
 	형식이 바뀌지 않게 'yy/MM/dd'를 추가해줌으로써 형식을 고정시킴

 	다른 해결 방법: 예상이지만..locale이 문제라면 locale을 변경시키면 되지않을까도 생각해봄 나중에 시도 해보기로..
   	한국의 Locale은 보통 ko_KR.UTF-8인데 우분투에서 확인결과 C.UTF-8로 나옴 이것을 바꿔주면 되지 않을까 의심해봄
   	
   	ubuntu@ip-172-31-30-52:~$ locale
	LANG=C.UTF-8
	LANGUAGE=
	LC_CTYPE="C.UTF-8"
	LC_NUMERIC="C.UTF-8"
	LC_TIME="C.UTF-8"
	LC_COLLATE="C.UTF-8"
	LC_MONETARY="C.UTF-8"
	LC_MESSAGES="C.UTF-8"
	LC_PAPER="C.UTF-8"
	LC_NAME="C.UTF-8"
	LC_ADDRESS="C.UTF-8"
	LC_TELEPHONE="C.UTF-8"
	LC_MEASUREMENT="C.UTF-8"
	LC_IDENTIFICATION="C.UTF-8"
	LC_ALL=
	
 	https://beomi.github.io/2017/07/10/Ubuntu-Locale-to-ko_KR/
 	
4) 해결을 위해 시도했던것

 	두서버에서 무엇이 차이나는지 계속 로그로 확인
 	- 쿼리의 결과값
 	- timezone의 설정
 	
5) 궁금점 : 
	
 	substr함수의 목적은 문자열을 자르는것인데..
 	왜 기존의 목적인 문자열을 자르다가 말고 
 	locale에 따라 또 문자열을 새롭게 변환을 해서 기존의 목적에서 벗어나는건지 ..
 	다른나라 사람들은 20/03/18이것보다 18-MAR-20이게 편한가보다 라고 그냥 생각할수밖에..?

## 4. 요즘 계속된 문제해결중 느낀점

1) 리눅스에 대한 학습의 필요성

 	몇주간 요즘 문제해결을 해오면서 
 	리눅스의 기본적이고 필수적인 사용법들에 대한 최소한의 학습이 필요하다고 생각이 계속 든다
 	포스팅에서 리눅스를 쓰니까 따라서 리눅스를 처음 쓴것인데..
 	리눅스를 하나부터 열까지 다 모른상태에서 진행하다보니 문제해결에 어려움을 겪을때가 많은것 같다.
 	이건 기본적이고 쉽게 해결할수도 있었을텐데 하는것들이 특히 포함된다.
 	가장 필수적인 튜토리얼들을 하나부터 5까지는 이론과 실습을 진행하고
 	그 이후 모르는것들을 채워가는게 효율적이지 않나 생각이 든다
 	그때그때 문제를 겪어서 필요하다고 생각되는것들만 찾는것의 장점은
 	그것만 찾으면 되니까 필요하지 않은것들까지 학습할 필요가 없다는것이다. 
 	하지만 단점은 가 전혀 필요하다고 인식도 않고 모르고 있었던것인데
 	학습을 통해서 새로운것을 알게됨으로써, 기존에 필요성 자체를 인식못하고있는데,
 	학습을 통해 새로운 필요성을 느끼고, 더나은 개선된 것들을 적용해 볼 수 있다는 것이다.
 	무언가 필요하니까 주먹구구식으로 찾는것보다도 튜토리얼과 학습을 한다면 그것또한 장점이 있는것이다.
 	그래서 적절한 조화가 필요하다

2) 리눅스냐 윈도우냐를 선택하는 기준

 	그리고 이쯤 되니까 정말로 리눅스를 왜 선택했고..
 	윈도우가 아닌 리눅에서 대해 선택한 이유에 대해 생각해 봐야할때다.
 	서버를 윈도우로 돌리는것이 아닌 잘 모르는 리눅스로 하다보니 익숙치않고 비효율적일 뿐더러 문제해결에 어려움이 많다
 	리눅스는 윈도우에 비해 가볍고,자원소모가 덜심하고,비용이 들지않는등의 이유말이다
 	그런데 그 기준은 내가 어떤 서비스를 할것이냐가 중요하다
 	실제적으로 도키를 서비스를 해야 왜 윈도우가 아닌 리눅스이여야 하는지의 필요성에 대해 살로 느낄것같다.
 	결국 중심은 도키의 서비스를 어느정도 까지 할것인가이다. 그 범위를 정해야한다. 그게 사실 처음 프로젝트를
 	시작할때, 앞에서 중요하게 정했어야 할 문제인것이다. 그러면 운영체제의 선택에 애매함을 없앨수 있을것이다.
 	도키가 얼마나 많은 회원들을 받을거고 어느정도 수요를 예상하고 돌릴것이냐는것이다
 	그게 운영체제의  선택에도 영향을 줄것같다는 것이다

3) tracker : user analytics tools

 		서비스를 돌릴 시점이 되니까 방문자에 대한 추적의 필요성이 느껴진다
  		어떤 사람이 몇시에 어디서 얼마나 왔는가등은 서비스를 하는데 여러거자 방면으로 중요할것 같다.
 	 	현재는 단순히 접속시간,아이피등의 간단한 것만 추적하지만 그런것들을 체계적으로 관리해주는것이 필요하지 않을까?
 	 	또한 내 서버의 자원을 사용하는게 아니라 다른 서버의 자원을 사용하는 장점도 있을것 같고 알아봐야 할 것 같다.

4) 구글링 검색 경험 및 스킬 부족
 	
 	검색에 대한 스킬도 늘려야 할것같다. 검색력이 조금 부족하다고도 느낌
 	다양한 단어로 검색을 해보고, 영문 문서도 많이보고, 많이 경험해보고 접해보는게 최선일듯하다..


 	
 	
 		   
     